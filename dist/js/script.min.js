class Slider{constructor(e,t,s,r){this.sliderName=e,this.slider=document.querySelector(e+" .slider"),this.slides=Array.prototype.slice.call(document.querySelectorAll(e+" .slide:not(.slide_pseudo)")),this.gap=r,this.sliderDots=Array.prototype.slice.call(document.querySelectorAll(e+" .slider-dot"));let i=this;this.alignSide=t,this.i=s,this.sliderDots.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault,this.i=this.sliderDots.indexOf(e),this.sliderRefresh()})}),this.btnNext=document.querySelector(e+" .arrow-next"),this.btnPrev=document.querySelector(e+" .arrow-prev"),this.btnPrev.addEventListener("click",(function(e){e.preventDefault(),i.i--,i.i<0&&(i.i=i.slides.length-1),i.sliderRefresh()})),this.btnNext.addEventListener("click",(function(e){e.preventDefault(),i.i++,i.i>=i.slides.length&&(i.i=0),i.sliderRefresh()})),this.pseudoLast=this.slides[0].cloneNode(!0),this.pseudoLast.classList.remove("slide_active","slide"),this.pseudoLast.classList.add("slide_pseudo"),this.pseudoFirst=this.slides[this.slides.length-1].cloneNode(!0),this.pseudoFirst.classList.remove("slide_active","slide"),this.pseudoFirst.classList.add("slide_pseudo"),this.slider.appendChild(this.pseudoLast),this.slider.insertBefore(this.pseudoFirst,this.slides[0])}sliderRefresh(){this.activeDot=document.querySelector(this.sliderName+" .slider-dot_active"),this.activeDot.classList.remove("slider-dot_active"),this.sliderDots[this.i].classList.add("slider-dot_active"),this.activeSlide=document.querySelector(this.sliderName+" .slide_active"),this.activeSlide.classList.remove("slide_active"),this.slides[this.i].classList.add("slide_active");let e=document.querySelector(this.sliderName+" .slide:not(.slide_active)").offsetWidth+this.gap;"right"===this.alignSide?this.slider.style.marginRight=-e*(this.slides.length+1-this.i-1)+"px":"left"===this.alignSide&&(this.slider.style.marginLeft=-e*(this.i+1)+"px")}}const heroSlider=new Slider(".hero-slider","right",1,32),roomSlider=new Slider(".rooms-slider","left",0,24),tipsSlider=new Slider(".tips-slider","left",1,32);window.addEventListener("resize",(function(){heroSlider.sliderRefresh(),roomSlider.sliderRefresh(),tipsSlider.sliderRefresh()})),heroSlider.sliderRefresh(),roomSlider.sliderRefresh(),tipsSlider.sliderRefresh();let header=document.querySelector(".header");window.addEventListener("scroll",(function(){window.pageYOffset>50?header.classList.add("header_fill"):header.classList.remove("header_fill")}));let gallery=document.querySelector(".gallery__body"),galCols=document.querySelectorAll(".gallery__col"),galItems=document.querySelector(".gallery__items"),speed=gallery.dataset.speed,positionX=0,coordXpercentage=0;function scrollGallery(){let e=0;galCols.forEach(t=>{e+=t.offsetWidth});let t=e-gallery.offsetWidth,s=Math.floor(coordXpercentage-positionX);positionX+=s*speed;let r=t/200*positionX;galItems.style.transform=`translate3d(${-r}px,0,0)`,Math.abs(s)>0?requestAnimationFrame(scrollGallery):gallery.classList.remove("_init")}gallery.addEventListener("mousemove",(function(e){let t=gallery.offsetWidth,s=e.pageX-t/2;coordXpercentage=s/t*200,gallery.classList.contains("_init")||(requestAnimationFrame(scrollGallery),gallery.classList.add("_init"))}));const moreBtn=document.querySelector(".show-more-btn");async function getProducts(e){if(!e.classList.contains("_hold")){e.classList.add("_hold");const t="json/products.json";let s=await fetch(t);if(s.ok){loadProducts(await s.json()),e.classList.remove("_hold"),e.remove()}else alert("error")}}function loadProducts(e){const t=document.querySelector(".catalog__list");e.products.forEach(e=>{console.log(e.id);const s=e.id,r=(e.url,e.image),i=e.title,l=e.text,o=e.price,a=e.priceOld,c=e.shareUrl,n=e.likeUrl,d=e.labels;let u=`<li data-id="${s}" class="product">`,p="";if(d){let e='<div class="labels">',t="</div>",s="";d.forEach(e=>{s+=`<span class="label label_${e.type}">${e.value}</span>`}),p+=e,p+=s,p+=t}let h="";h+=u,h+=p,h+=`\n\t    \t<img class="product__img"src="img/products/${r}" alt="${i}">\n\t    `,h+=`\n\t\t    <div class="product__text">\n\t\t\t    <h3 class="product__title">${i}</h3>\n\t\t\t    <p class="product__desc">${l}</p>\n          <p class="product__price">${o}</p>\n          <span class="product__price_old">${a}</span>\n\t\t    </div>\n    \t`,h+=`\n        <div class="product__layout"></div>\n        <div class="product__btns">\n          <button class="btn btn_white btn_buy">Add to cart</button>\n          <a href="${c}" class="btn btn_share   _icon-share"><span class="btn__text">Share</  span></a>\n          <a href="${n}" class="btn btn_fvrt   _icon-favorite"><span class="btn__text">Like</  span></a>\n        </div>\n\t    `,h+="</li>",t.insertAdjacentHTML("beforeend",h)})}moreBtn.addEventListener("click",(function(e){e.preventDefault(),getProducts(moreBtn)}));const products=document.querySelectorAll(".product"),cart=document.querySelector(".cart"),cartCounter=document.querySelector(".cart__counter"),cartList=document.querySelector(".cart__list");function addToCart(e,t){const s=e.querySelector(".product__img");if(!t.classList.contains("_hold")){t.classList.add("_hold");const e=s.cloneNode(!0);e.classList.add("fly"),e.style.cssText=`\n    width: ${s.offsetWidth}px;\n    height: ${s.offsetHeight}px;\n    top: ${s.getBoundingClientRect().top}px;\n    left: ${s.getBoundingClientRect().left}px;\n    `,document.body.append(e),e.style.cssText=`\n    width: 1px;\n    height: 1px;\n    top: ${cart.getBoundingClientRect().top}px;\n    left: ${cart.getBoundingClientRect().left}px;\n    opacity: 0;\n    `,e.addEventListener("transitionend",(function(){e.classList.contains("fly")&&e.remove()})),t.classList.remove("_hold")}createCartItem(e),updateCartCounter(parseInt(cartCounter.innerHTML)+1)}function createCartItem(e){const t=e.querySelector(".product__img"),s=e.querySelector(".product__title");let r=document.createElement("li");r.classList.add("cart-product"),r.innerHTML=`\n    <a href="#" class="cart-product__image">${t.outerHTML}</a>\n    <div class="cart-product__content">\n      <a href="#" class="cart-product__title"> ${s.innerHTML}</a>\n      <div class="cart-product__quantity">Quantity:<span>1</span></div>\n      <a href="#"class="cart-product__delete">Delete</a>\n    </div>\n  `,cartList.appendChild(r);let i=r.querySelector(".cart-product__delete");i.addEventListener("click",e=>{e.preventDefault(),i.closest(".cart-product").remove(),updateCartCounter(parseInt(cartCounter.innerHTML)-1)})}function updateCartCounter(e){cartCounter.innerHTML=e,cartCounter.style.cssText=0==e?"opacity: 0;":"opacity: 1;"}updateCartCounter(parseInt(cartCounter.innerHTML)),cart.addEventListener("click",e=>{e.preventDefault(),parseInt(cartCounter.innerHTML)>0?cartList.classList.add("cart__list_active"):cartList.classList.remove("cart__list_active")}),products.forEach(e=>{const t=e.querySelector(".btn_buy");t.addEventListener("click",s=>{s.preventDefault(),addToCart(e,t)})});let accordArrows=document.querySelectorAll(".footer__arrow");accordArrows.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),e.classList.toggle("footer__arrow_active"),e.nextElementSibling.classList.toggle("footer__menu_active")})});